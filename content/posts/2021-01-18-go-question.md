---
layout:     post
title:      "一道go面试题"
date:       2021-01-18 21:50:43 +0800
author:     "max"
---

# 一道 Go 面试题

请问下面这两段代码分别输出什么?
![](https://img.fulitu.club/go-1.png)
![](https://img.fulitu.club/go-2.png)

直接说结果, 如果你的电脑不是奔腾, 赛扬什么的处理器, 那结果基本是固定的, 就是啥也没有.
因为在 goroutine 反应过来之前, 程序已经执行完了, 还没来得及输出就结束了.

要么, 你就让时间延迟几秒再结束, time.Sleep(10 * time.Second), 要么就像下面这样使用 WaitGroup 来等待 goroutine 结束
![](https://img.fulitu.club/go-1-1.png)

这不是问题的重点, 重点是这两种使用匿名函数的方式, 输出会有什么不一样吗?

首先说第一种, 没有传参的情况下, 匿名函数中是使用的引用地址来操作的, 这时候 i 可能已经加到 10 了, 所以打印出来可能会是 10 个 10, 或者中间夹杂几个其他数字什么的. (而且这时候 goroutine 总是在 i++ 之后执行, 所以是从 1 - 10, 不是 0 - 9)

第二种情况, 显而易见就是乱序的了, 会把 0 - 9 挨个输出, 但是是乱序的
