<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Gerrit概念说明及使用 | Beoning</title>
<meta name="keywords" content="" />
<meta name="description" content="Gerrit介绍 Gerrit简介 Gerrit, 一种开放源代码的代码审查软件, 使用网页界面. 利用网页浏览器, 同一个团队的软件开发者, 可以相互审阅彼此修改后的代码, 决定是否能够提交, 回退或是继续修改. 它使用版本控制系统Git作为底层.
它分支自Rietveld, 作者为Google公司的Shawn Pearce, 原先是为了管理Android项目而产生. 这个软件的名称, 来自于荷兰家具设计师赫里特·里特费尔德(Gerrit Rietveld).
因为对访问控制表(ACL)相关的修正, 没有被集成进Rietveld, 之后Gerrit就由Rietveld分支出来, 形成独立软件项目.
最早它是由Python写成, 在第二版后, 改成用Java与SQL. 使用Google Web Toolkit来产生前端的JavaScript.
为什么需要Gerrit 首先, 代码审查可以帮助程序员了解系统功能, 从整体掌控代码质量, 其次, 通过代码审核可以及时止损, 构建更加健壮的系统代码.
代码审核的建议(来自程序员客栈)   对事不对人, 大家都是同事, 在一个团队工作和气最重要. 不要在Code Review中说&quot;你写的什么垃圾&quot;这种话, 你可以说&quot;这个变量名不是很好理解, 咱们换成xxx是不是更好&quot;
  每个Review至少给一条正面评价. Gerrit中有对代码点赞的功能, 可以时不时的使用一下.
  保证发布的代码和评审意见的可读性.
  用工具进行基础问题的自动化检查. 用Tab还是空格, 用两个空格还是四个空格, 缩进风格是使用K&amp;R还是Allman. 这些问题可以使用php code sniffer解决, 团队应该把精力放在代码规范, 代码性能优化等地方.
  全员参加Code Review, 并设定各部分负责人.
  每个代码PR(Pull Request)内容一定要少.">
<meta name="author" content="max">
<link rel="canonical" href="https://www.soundpill.cn/posts/2020-09-23-gerrit-desc/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.soundpill.cn/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.soundpill.cn/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.soundpill.cn/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.soundpill.cn/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.soundpill.cn/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.92.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Gerrit概念说明及使用" />
<meta property="og:description" content="Gerrit介绍 Gerrit简介 Gerrit, 一种开放源代码的代码审查软件, 使用网页界面. 利用网页浏览器, 同一个团队的软件开发者, 可以相互审阅彼此修改后的代码, 决定是否能够提交, 回退或是继续修改. 它使用版本控制系统Git作为底层.
它分支自Rietveld, 作者为Google公司的Shawn Pearce, 原先是为了管理Android项目而产生. 这个软件的名称, 来自于荷兰家具设计师赫里特·里特费尔德(Gerrit Rietveld).
因为对访问控制表(ACL)相关的修正, 没有被集成进Rietveld, 之后Gerrit就由Rietveld分支出来, 形成独立软件项目.
最早它是由Python写成, 在第二版后, 改成用Java与SQL. 使用Google Web Toolkit来产生前端的JavaScript.
为什么需要Gerrit 首先, 代码审查可以帮助程序员了解系统功能, 从整体掌控代码质量, 其次, 通过代码审核可以及时止损, 构建更加健壮的系统代码.
代码审核的建议(来自程序员客栈)   对事不对人, 大家都是同事, 在一个团队工作和气最重要. 不要在Code Review中说&quot;你写的什么垃圾&quot;这种话, 你可以说&quot;这个变量名不是很好理解, 咱们换成xxx是不是更好&quot;
  每个Review至少给一条正面评价. Gerrit中有对代码点赞的功能, 可以时不时的使用一下.
  保证发布的代码和评审意见的可读性.
  用工具进行基础问题的自动化检查. 用Tab还是空格, 用两个空格还是四个空格, 缩进风格是使用K&amp;R还是Allman. 这些问题可以使用php code sniffer解决, 团队应该把精力放在代码规范, 代码性能优化等地方.
  全员参加Code Review, 并设定各部分负责人.
  每个代码PR(Pull Request)内容一定要少." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.soundpill.cn/posts/2020-09-23-gerrit-desc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-23T18:35:52&#43;08:00" />
<meta property="article:modified_time" content="2020-09-23T18:35:52&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Gerrit概念说明及使用"/>
<meta name="twitter:description" content="Gerrit介绍 Gerrit简介 Gerrit, 一种开放源代码的代码审查软件, 使用网页界面. 利用网页浏览器, 同一个团队的软件开发者, 可以相互审阅彼此修改后的代码, 决定是否能够提交, 回退或是继续修改. 它使用版本控制系统Git作为底层.
它分支自Rietveld, 作者为Google公司的Shawn Pearce, 原先是为了管理Android项目而产生. 这个软件的名称, 来自于荷兰家具设计师赫里特·里特费尔德(Gerrit Rietveld).
因为对访问控制表(ACL)相关的修正, 没有被集成进Rietveld, 之后Gerrit就由Rietveld分支出来, 形成独立软件项目.
最早它是由Python写成, 在第二版后, 改成用Java与SQL. 使用Google Web Toolkit来产生前端的JavaScript.
为什么需要Gerrit 首先, 代码审查可以帮助程序员了解系统功能, 从整体掌控代码质量, 其次, 通过代码审核可以及时止损, 构建更加健壮的系统代码.
代码审核的建议(来自程序员客栈)   对事不对人, 大家都是同事, 在一个团队工作和气最重要. 不要在Code Review中说&quot;你写的什么垃圾&quot;这种话, 你可以说&quot;这个变量名不是很好理解, 咱们换成xxx是不是更好&quot;
  每个Review至少给一条正面评价. Gerrit中有对代码点赞的功能, 可以时不时的使用一下.
  保证发布的代码和评审意见的可读性.
  用工具进行基础问题的自动化检查. 用Tab还是空格, 用两个空格还是四个空格, 缩进风格是使用K&amp;R还是Allman. 这些问题可以使用php code sniffer解决, 团队应该把精力放在代码规范, 代码性能优化等地方.
  全员参加Code Review, 并设定各部分负责人.
  每个代码PR(Pull Request)内容一定要少."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.soundpill.cn/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Gerrit概念说明及使用",
      "item": "https://www.soundpill.cn/posts/2020-09-23-gerrit-desc/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Gerrit概念说明及使用",
  "name": "Gerrit概念说明及使用",
  "description": "Gerrit介绍 Gerrit简介 Gerrit, 一种开放源代码的代码审查软件, 使用网页界面. 利用网页浏览器, 同一个团队的软件开发者, 可以相互审阅彼此修改后的代码, 决定是否能够提交, 回退或是继续修改. 它使用版本控制系统Git作为底层.\n它分支自Rietveld, 作者为Google公司的Shawn Pearce, 原先是为了管理Android项目而产生. 这个软件的名称, 来自于荷兰家具设计师赫里特·里特费尔德(Gerrit Rietveld).\n因为对访问控制表(ACL)相关的修正, 没有被集成进Rietveld, 之后Gerrit就由Rietveld分支出来, 形成独立软件项目.\n最早它是由Python写成, 在第二版后, 改成用Java与SQL. 使用Google Web Toolkit来产生前端的JavaScript.\n为什么需要Gerrit 首先, 代码审查可以帮助程序员了解系统功能, 从整体掌控代码质量, 其次, 通过代码审核可以及时止损, 构建更加健壮的系统代码.\n代码审核的建议(来自程序员客栈)   对事不对人, 大家都是同事, 在一个团队工作和气最重要. 不要在Code Review中说\u0026quot;你写的什么垃圾\u0026quot;这种话, 你可以说\u0026quot;这个变量名不是很好理解, 咱们换成xxx是不是更好\u0026quot;\n  每个Review至少给一条正面评价. Gerrit中有对代码点赞的功能, 可以时不时的使用一下.\n  保证发布的代码和评审意见的可读性.\n  用工具进行基础问题的自动化检查. 用Tab还是空格, 用两个空格还是四个空格, 缩进风格是使用K\u0026amp;R还是Allman. 这些问题可以使用php code sniffer解决, 团队应该把精力放在代码规范, 代码性能优化等地方.\n  全员参加Code Review, 并设定各部分负责人.\n  每个代码PR(Pull Request)内容一定要少.",
  "keywords": [
    
  ],
  "articleBody": "Gerrit介绍 Gerrit简介 Gerrit, 一种开放源代码的代码审查软件, 使用网页界面. 利用网页浏览器, 同一个团队的软件开发者, 可以相互审阅彼此修改后的代码, 决定是否能够提交, 回退或是继续修改. 它使用版本控制系统Git作为底层.\n它分支自Rietveld, 作者为Google公司的Shawn Pearce, 原先是为了管理Android项目而产生. 这个软件的名称, 来自于荷兰家具设计师赫里特·里特费尔德(Gerrit Rietveld).\n因为对访问控制表(ACL)相关的修正, 没有被集成进Rietveld, 之后Gerrit就由Rietveld分支出来, 形成独立软件项目.\n最早它是由Python写成, 在第二版后, 改成用Java与SQL. 使用Google Web Toolkit来产生前端的JavaScript.\n为什么需要Gerrit 首先, 代码审查可以帮助程序员了解系统功能, 从整体掌控代码质量, 其次, 通过代码审核可以及时止损, 构建更加健壮的系统代码.\n代码审核的建议(来自程序员客栈)   对事不对人, 大家都是同事, 在一个团队工作和气最重要. 不要在Code Review中说\"你写的什么垃圾\"这种话, 你可以说\"这个变量名不是很好理解, 咱们换成xxx是不是更好\"\n  每个Review至少给一条正面评价. Gerrit中有对代码点赞的功能, 可以时不时的使用一下.\n  保证发布的代码和评审意见的可读性.\n  用工具进行基础问题的自动化检查. 用Tab还是空格, 用两个空格还是四个空格, 缩进风格是使用K\u0026R还是Allman. 这些问题可以使用php code sniffer解决, 团队应该把精力放在代码规范, 代码性能优化等地方.\n  全员参加Code Review, 并设定各部分负责人.\n  每个代码PR(Pull Request)内容一定要少. Code Review效果和质量与PR代码量成反比, 提交的代码越多, Code Review的效果就越差. 所以要经常Code Review, 保证每个PR代码的量要少, 最多不超过300行/PR.\n  在写新代码之前, 先Review掉需要评审的代码. 不要堆积Review, 有PR产生一定要尽快Review, 否则时间拖的长了以后Review的过程就会比较艰难.\n  不要在Review中讨论需求, Review就是Review. 要明确Code Review是完善代码, 始终要以代码质量为中心要素.\n  Gerrit使用 账号登录与查看设置 首先, 需要在LDAP系统中发放账号, 拿到自己的账号后进行登录.\n登录后在账号中点击Settings设置, 找到新增SSH kyes的设置, 将自己机器上的公钥添加进去\n然后到仓库中选择属于自己的项目clone到本地\n注意: 红框中的两个项目为默认项目, 是新建仓库时需要继承权限来用的, 不要动\n克隆完毕后需要在项目目录下修改和账户相同的邮箱与真实的姓名, 否则提交时会校验失败\ngit config user.email muyege@gmail.com git config user.name muyege 加–global是修改全局的, 如果项目很多, 为避免一个个项目修改麻烦, 可以加这个参数.\n本地仓库设置和提交 因为Gerrit的设置, 一般用户是没有直接提交到主分支或者开发分支的权限的, 必须提交到引用分支先进行代码审核, 审核通过后才能merge到对应分支. 所以, 在本地操作代码库的时候会出现push不上去的问题, 这时候我们需要在项目下设置Gerrit提供给我们的引用分支.\n一般情况下在Gerrit权限设置里有三种类型的分支:\nrefs/* : 这是管理员才有的权限, 表示当前项目下的所有分支, 拥有此权限可以随意push到任何远端分支\nrefs/heads/* : 这是不需要经过code review的分支, 与 refs/* 同样权限\nrefs/for/* : 这是需要经过code review的分支, 提交到此分支上的代码需要经过code review, 通过后才能合并到正式分支上.\n我们在提交代码审核的时候需要将代码提交到gerrit为我们提供的引用分支上, 比如说: 我在dev分支上操作, 本来要push的命令需要由 git push origin dev 改为 git push origin HEAD:/refs/for/dev.\n如果嫌每次写这么长不方便的话, 可以在项目下做如下配置, git config remote.origin.push ‘refs/heads/*:refs/for/*’, 这样每次提交的时候就会自动提交到引用分支上了.\n代码审核 当有代码需要审核时会在CHANGES标签中看到待审核的纪录\nOpen表示打开的代码审核\nMerged表示已经通过且已合并的代码审核\nAbandoned表示未通过或遗弃的代码审核\n审核页面, 有 +1 和 +2 两个权限.\n只有有 +2 权限的同学才能够把审核通过的代码 submit 到真正的远端分支中.\n+1 权限的同学, 多为与你一个组, 或者做同一个业务的同学, 他们对你的代码先进行一次review\n当+2 的同学审核通过后, submit 了代码后, 本次Review 就结束了.\n 然后回到你自己的本地分支, 执行以下 git pull –rebase 同步一下远端分支. 然后继续进行后续工作.\n 当评审不通过时, 需要修改代码后再次提交评审, 这里分两种情况, 第一种情况是评审人员没有ABANDON的情况下, 可以修改代码后使用以下命令再次提交\n git add file git coomit --amend --no-edit 第二种情况是评审人员已经将此次评审ABANDON了, 那么就需要重新走正常流程提交评审.\n冲突解决 在实际开发中, 可能其他同学提交的代码与自己修改的代码修改了同一处地方, 从而产生了冲突.\n比如：\nA同学提交了 a.txt 文件, 在最后一行添加了而一些内容并且审核通过已经 submit了. 此时, B同学也在a.txt文件中的最后一行添加了内容, 但是没有先做 git pull –rebase 操作, 直接推到gerrit平台上则会产生冲突.\n此时: 需要先到本地进行 git pull –rebase 操作, 更新远端代码, 解决冲突! 具体步骤如下:\n1 git pull –rebase\n2 找到冲突文件, 并解决冲突, 解决完后执行 git add 文件名\n3 继续执行git rebase –continue, 如果有冲突文件继续解决.\n4 待所有冲突解决之后, 执行git commit –amend –no-edit 命令, 不需要对commit msg信息进行任何修改\n5 最后执行git push origin xxx, 将分支代码提交即可.\n",
  "wordCount" : "262",
  "inLanguage": "en",
  "datePublished": "2020-09-23T18:35:52+08:00",
  "dateModified": "2020-09-23T18:35:52+08:00",
  "author":{
    "@type": "Person",
    "name": "max"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.soundpill.cn/posts/2020-09-23-gerrit-desc/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Beoning",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.soundpill.cn/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.soundpill.cn" accesskey="h" title="Beoning (Alt + H)">Beoning</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Gerrit概念说明及使用
    </h1>
    <div class="post-meta"><span title='2020-09-23 18:35:52 +0800 CST'>September 23, 2020</span>&nbsp;·&nbsp;max

</div>
  </header> 
  <div class="post-content"><h3 id="gerrit介绍">Gerrit介绍<a hidden class="anchor" aria-hidden="true" href="#gerrit介绍">#</a></h3>
<h4 id="gerrit简介">Gerrit简介<a hidden class="anchor" aria-hidden="true" href="#gerrit简介">#</a></h4>
<p>Gerrit, 一种开放源代码的代码审查软件, 使用网页界面. 利用网页浏览器, 同一个团队的软件开发者, 可以相互审阅彼此修改后的代码, 决定是否能够提交, 回退或是继续修改. 它使用版本控制系统Git作为底层.</p>
<p>它分支自Rietveld, 作者为Google公司的Shawn Pearce, 原先是为了管理Android项目而产生. 这个软件的名称, 来自于荷兰家具设计师赫里特·里特费尔德(Gerrit Rietveld).</p>
<p>因为对访问控制表(ACL)相关的修正, 没有被集成进Rietveld, 之后Gerrit就由Rietveld分支出来, 形成独立软件项目.</p>
<p>最早它是由Python写成, 在第二版后, 改成用Java与SQL. 使用Google Web Toolkit来产生前端的JavaScript.</p>
<h4 id="为什么需要gerrit">为什么需要Gerrit<a hidden class="anchor" aria-hidden="true" href="#为什么需要gerrit">#</a></h4>
<p>首先, 代码审查可以帮助程序员了解系统功能, 从整体掌控代码质量, 其次, 通过代码审核可以及时止损, 构建更加健壮的系统代码.</p>
<h4 id="代码审核的建议来自程序员客栈httpswwwzhihucomquestion20046020answer555007256">代码审核的建议(来自<a href="https://www.zhihu.com/question/20046020/answer/555007256">程序员客栈</a>)<a hidden class="anchor" aria-hidden="true" href="#代码审核的建议来自程序员客栈httpswwwzhihucomquestion20046020answer555007256">#</a></h4>
<ol>
<li>
<p>对事不对人, 大家都是同事, 在一个团队工作和气最重要. 不要在Code Review中说&quot;你写的什么垃圾&quot;这种话, 你可以说&quot;这个变量名不是很好理解, 咱们换成xxx是不是更好&quot;</p>
</li>
<li>
<p>每个Review至少给一条正面评价. Gerrit中有对代码点赞的功能, 可以时不时的使用一下.</p>
</li>
<li>
<p>保证发布的代码和评审意见的可读性.</p>
</li>
<li>
<p>用工具进行基础问题的自动化检查. 用Tab还是空格, 用两个空格还是四个空格, 缩进风格是使用K&amp;R还是Allman. 这些问题可以使用php code sniffer解决, 团队应该把精力放在代码规范, 代码性能优化等地方.</p>
</li>
<li>
<p>全员参加Code Review, 并设定各部分负责人.</p>
</li>
<li>
<p>每个代码PR(Pull Request)内容一定要少. Code Review效果和质量与PR代码量成反比, 提交的代码越多, Code Review的效果就越差. 所以要经常Code Review, 保证每个PR代码的量要少, 最多不超过300行/PR.</p>
</li>
<li>
<p>在写新代码之前, 先Review掉需要评审的代码. 不要堆积Review, 有PR产生一定要尽快Review, 否则时间拖的长了以后Review的过程就会比较艰难.</p>
</li>
<li>
<p>不要在Review中讨论需求, Review就是Review. 要明确Code Review是完善代码, 始终要以代码质量为中心要素.</p>
</li>
</ol>
<h3 id="gerrit使用">Gerrit使用<a hidden class="anchor" aria-hidden="true" href="#gerrit使用">#</a></h3>
<h4 id="账号登录与查看设置">账号登录与查看设置<a hidden class="anchor" aria-hidden="true" href="#账号登录与查看设置">#</a></h4>
<p>首先, 需要在LDAP系统中发放账号, 拿到自己的账号后进行登录.</p>
<p>登录后在账号中点击Settings设置, 找到新增SSH kyes的设置, 将自己机器上的公钥添加进去</p>
<p><img loading="lazy" src="https://upload-images.jianshu.io/upload_images/1656074-c0e5e4483b5c40c8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SSH keys设置"  />
</p>
<p>然后到仓库中选择属于自己的项目clone到本地</p>
<p><img loading="lazy" src="https://upload-images.jianshu.io/upload_images/1656074-cbd5f77ab4a78c37.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="git项目列表"  />
</p>
<p>注意: 红框中的两个项目为默认项目, 是新建仓库时需要继承权限来用的, 不要动</p>
<p><img loading="lazy" src="https://upload-images.jianshu.io/upload_images/1656074-c65ca4a43345fdce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="默认项目"  />
</p>
<p>克隆完毕后需要在项目目录下修改和账户相同的邮箱与真实的姓名, 否则提交时会校验失败</p>
<pre tabindex="0"><code>git config user.email muyege@gmail.com

git config user.name muyege
</code></pre><p>加&ndash;global是修改全局的, 如果项目很多, 为避免一个个项目修改麻烦, 可以加这个参数.</p>
<h4 id="本地仓库设置和提交">本地仓库设置和提交<a hidden class="anchor" aria-hidden="true" href="#本地仓库设置和提交">#</a></h4>
<p>因为Gerrit的设置, 一般用户是没有直接提交到主分支或者开发分支的权限的, 必须提交到引用分支先进行代码审核, 审核通过后才能merge到对应分支. 所以, 在本地操作代码库的时候会出现push不上去的问题, 这时候我们需要在项目下设置Gerrit提供给我们的引用分支.</p>
<p>一般情况下在Gerrit权限设置里有三种类型的分支:</p>
<p>refs/* : 这是管理员才有的权限, 表示当前项目下的所有分支, 拥有此权限可以随意push到任何远端分支</p>
<p>refs/heads/* : 这是不需要经过code review的分支, 与 refs/* 同样权限</p>
<p>refs/for/* : 这是需要经过code review的分支, 提交到此分支上的代码需要经过code review, 通过后才能合并到正式分支上.</p>
<p>我们在提交代码审核的时候需要将代码提交到gerrit为我们提供的引用分支上, 比如说: 我在dev分支上操作, 本来要push的命令需要由 git push origin dev 改为 git push origin HEAD:/refs/for/dev.</p>
<p>如果嫌每次写这么长不方便的话, 可以在项目下做如下配置, git config remote.origin.push &lsquo;refs/heads/*:refs/for/*&rsquo;, 这样每次提交的时候就会自动提交到引用分支上了.</p>
<h4 id="代码审核">代码审核<a hidden class="anchor" aria-hidden="true" href="#代码审核">#</a></h4>
<p>当有代码需要审核时会在CHANGES标签中看到待审核的纪录</p>
<p><img loading="lazy" src="https://upload-images.jianshu.io/upload_images/1656074-cd61a43a015eef8d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="审核状态"  />
</p>
<p>Open表示打开的代码审核</p>
<p>Merged表示已经通过且已合并的代码审核</p>
<p>Abandoned表示未通过或遗弃的代码审核</p>
<p><img loading="lazy" src="https://upload-images.jianshu.io/upload_images/1656074-bce72e437220832f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="审核页面"  />
</p>
<p>审核页面, 有 +1 和 +2 两个权限.</p>
<p>只有有 +2 权限的同学才能够把审核通过的代码 submit 到真正的远端分支中.</p>
<p>+1 权限的同学, 多为与你一个组, 或者做同一个业务的同学, 他们对你的代码先进行一次review</p>
<p>当+2 的同学审核通过后, submit 了代码后, 本次Review 就结束了.</p>
<blockquote>
<p>然后回到你自己的本地分支, 执行以下 git pull &ndash;rebase 同步一下远端分支. 然后继续进行后续工作.</p>
</blockquote>
<p>当评审不通过时, 需要修改代码后再次提交评审, 这里分两种情况, 第一种情况是评审人员没有ABANDON的情况下, 可以修改代码后使用以下命令再次提交</p>
<pre tabindex="0"><code>
git add file

git coomit --amend --no-edit

</code></pre><p>第二种情况是评审人员已经将此次评审ABANDON了, 那么就需要重新走正常流程提交评审.</p>
<h4 id="冲突解决">冲突解决<a hidden class="anchor" aria-hidden="true" href="#冲突解决">#</a></h4>
<p>在实际开发中, 可能其他同学提交的代码与自己修改的代码修改了同一处地方, 从而产生了冲突.</p>
<p>比如：</p>
<p>A同学提交了 a.txt 文件, 在最后一行添加了而一些内容并且审核通过已经 submit了. 此时, B同学也在a.txt文件中的最后一行添加了内容, 但是没有先做 git pull &ndash;rebase 操作, 直接推到gerrit平台上则会产生冲突.</p>
<p>此时: 需要先到本地进行 git pull &ndash;rebase 操作, 更新远端代码, 解决冲突! 具体步骤如下:</p>
<p>1&gt; git pull &ndash;rebase</p>
<p>2&gt; 找到冲突文件, 并解决冲突, 解决完后执行 git add 文件名</p>
<p>3&gt; 继续执行git rebase &ndash;continue, 如果有冲突文件继续解决.</p>
<p>4&gt; 待所有冲突解决之后, 执行git commit &ndash;amend  &ndash;no-edit 命令, 不需要对commit msg信息进行任何修改</p>
<p>5&gt; 最后执行git push origin xxx, 将分支代码提交即可.</p>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.soundpill.cn">Beoning</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
